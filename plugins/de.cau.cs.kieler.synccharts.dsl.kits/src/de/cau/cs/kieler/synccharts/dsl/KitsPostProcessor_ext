import ecore;
import retypingSynccharts;

//process(xtext::GeneratedMetamodel this) :
  //process(ePackage)
//;
process(ecore::EPackage this):
		//let ref2 = ((EReference)((EClass)this.getEClassifier('Region')).getEStructuralFeature('parentState')) :
			addEOpposites(getReference('State','regions'),getReference('Region','parentState'))
;
//get the reference, defined by its and the containing class' name
 getReference(ecore::EPackage this, String className, String referenceName):
	((EReference)((EClass)this.getEClassifier(className)).getEStructuralFeature(referenceName))
;
addEOpposites(ecore::EPackage this, EReference thisSide, EReference otherSide):
    thisSide.setEOpposite(otherSide) ->
    otherSide.setEOpposite(thisSide) -> 
    Void
;
//create the new literal
//create EEnumLiteral newLiteral(String literal, String name, int value) :
 //    setLiteral(literal) -> setName(name) -> setValue(value)
//;
//process(EStructuralFeature this) :
 //    null
//;
//create EReference newEReference(String name, EClass type) :
//	setName(name) -> setEType(type) -> setContainment(true)
//;
//process(EReference this) :
 //   if name == 'regions' then eOpposite.setEOpposite(newEReference('parentState',eClass()))
//;

cached getClass_Feature(ecore::EPackage this, String className, String featureName) :
	((ecore::EClass)this.getEClassifier(className)).getEStructuralFeature(featureName)
	
;
 


<?xml version="1.0" encoding="UTF-8"?> 
<?eclipse version="3.2"?>
<plugin>

   
   <extension point="org.eclipse.ui.commands">
	  <category name="SyncCharts" description="Commands related to SyncChart diagrams." id="org.eclipse.gmf.category.synccharts"/>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddToStateHandler"
         description="Adds a new OnEntryAction"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addEntryAction"
         name="Add OnEntryAction">
      <commandParameter
            id="de.cau.cs.kieler.synccharts.custom.parameters.type"
            name="Type"
            optional="false">
      </commandParameter>
	  </command>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddToStateHandler"
         description="Adds a new OnInsideAction"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addInsideAction"
         name="Add OnInsideAction">
      <commandParameter
            id="de.cau.cs.kieler.synccharts.custom.parameters.type"
            name="Type"
            optional="false">
      </commandParameter>
	  </command>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddToStateHandler"
         description="Adds a new OnExitAction"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addExitAction"
         name="Add OnExitAction">
      <commandParameter
            id="de.cau.cs.kieler.synccharts.custom.parameters.type"
            name="Type"
            optional="false">
      </commandParameter>
	  </command>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddToStateHandler"
         description="Adds a new Signal"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addSignal"
         name="Add Signal">
      <commandParameter
            id="de.cau.cs.kieler.synccharts.custom.parameters.type"
            name="Type"
            optional="false">
      </commandParameter>
	  </command>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddToStateHandler"
         description="Adds a new Variable"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addVariable"
         name="Add Variable">
      <commandParameter
            id="de.cau.cs.kieler.synccharts.custom.parameters.type"
            name="Type"
            optional="false">
      </commandParameter>
	  </command>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddToStateHandler"
         description="Adds a new SuspensionTrigger"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addSuspensionTrigger"
         name="Add SuspensionTrigger">
      <commandParameter
            id="de.cau.cs.kieler.synccharts.custom.parameters.type"
            name="Type"
            optional="false">
      </commandParameter>
	  </command>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddToStateHandler"
         description="Adds a new Region"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addRegion"
         name="Add Region">
      <commandParameter
            id="de.cau.cs.kieler.synccharts.custom.parameters.type"
            name="Type"
            optional="false">
      </commandParameter>
	  </command>
	  <command
         categoryId="org.eclipse.gmf.category.synccharts"
         defaultHandler="de.cau.cs.kieler.synccharts.diagram.custom.handlers.AddStateHandler"
         description="Adds a new State"
         id="de.cau.cs.kieler.synccharts.custom.contextMenu.addState"
         name="Add State">
	  </command>
   </extension>
   
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.gmf.runtime.diagram.ui.DiagramEditorContextMenu?before=addGroup">
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addEntryAction"
               label="Add OnEntry action"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
               </reference>
            </visibleWhen>
            <parameter
                  name="de.cau.cs.kieler.synccharts.custom.parameters.type"
                  value="OnEntryAction">
            </parameter>
         </command>
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addInsideAction"
               label="Add OnInside action"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
               </reference>
            </visibleWhen>
            <parameter
                  name="de.cau.cs.kieler.synccharts.custom.parameters.type"
                  value="OnInsideAction">
            </parameter>
         </command>
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addExitAction"
               label="Add OnExit action"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
               </reference>
            </visibleWhen>
            <parameter
                  name="de.cau.cs.kieler.synccharts.custom.parameters.type"
                  value="OnExitAction">
            </parameter>
         </command>
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addSignal"
               label="Add Signal"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
               </reference>
            </visibleWhen>
            <parameter
                  name="de.cau.cs.kieler.synccharts.custom.parameters.type"
                  value="Signal">
            </parameter>
         </command>
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addVariable"
               label="Add Variable"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
               </reference>
            </visibleWhen>
            <parameter
                  name="de.cau.cs.kieler.synccharts.custom.parameters.type"
                  value="Variable">
            </parameter>
         </command>
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addSuspensionTrigger"
               label="Add Suspension trigger"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
               </reference>
            </visibleWhen>
            <parameter
                  name="de.cau.cs.kieler.synccharts.custom.parameters.type"
                  value="SuspensionTrigger">
            </parameter>
         </command>
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addRegion"
               label="Add Region"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
               </reference>
            </visibleWhen>
            <parameter
                  name="de.cau.cs.kieler.synccharts.custom.parameters.type"
                  value="Region">
            </parameter>
         </command>
         <command
               commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addState"
               label="Add State"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="de.cau.cs.kieler.synccharts.custom.expressions.region">
               </reference>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="de.cau.cs.kieler.synccharts.custom.expressions.statePart">
	       <iterate
	             ifEmpty="false"
	             operator="and">
	          <or>
	             <instanceof
	                   value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateEditPart">
	             </instanceof>
	             <instanceof
	                   value="de.cau.cs.kieler.synccharts.diagram.edit.parts.State2EditPart">
	             </instanceof>
	             <instanceof
	                   value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateNameEditPart">
	             </instanceof>
	             <instanceof
	                   value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateName2EditPart">
	             </instanceof>
	             <instanceof
	                   value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateRegionCompartmentEditPart">
	             </instanceof>
	             <instanceof
	                   value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateRegionCompartment2EditPart">
	             </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateEntryActionsCompartmentEditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateEntryActionsCompartment2EditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateExitActionsCompartmentEditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateExitActionsCompartment2EditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateInnerActionsCompartmentEditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateInnerActionsCompartment2EditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSignalCompartmentEditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSignalCompartment2EditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSuspensionTriggerCompartmentEditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSuspensionTriggerCompartment2EditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateVariableCompartmentEditPart">
              </instanceof>
              <instanceof
                    value="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateVariableCompartment2EditPart">
              </instanceof>
	          </or>
	       </iterate>
      </definition>
      <definition
            id="de.cau.cs.kieler.synccharts.custom.expressions.region">
         <iterate
               ifEmpty="false"
               operator="and">
            <or>
               <instanceof
                     value="de.cau.cs.kieler.synccharts.diagram.edit.parts.RegionEditPart">
               </instanceof>
               <instanceof
                     value="de.cau.cs.kieler.synccharts.diagram.edit.parts.Region2EditPart">
               </instanceof>
               <instanceof
                     value="de.cau.cs.kieler.synccharts.diagram.edit.parts.RegionStateCompartmentEditPart">
               </instanceof>
            </or>
         </iterate>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addRegion"
            contextId="de.cau.cs.kieler.synccharts.diagram.ui.diagramContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+R">
      </key>
      <key
            commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addSignal"
            contextId="de.cau.cs.kieler.synccharts.diagram.ui.diagramContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+S">
      </key>
      <key
            commandId="de.cau.cs.kieler.synccharts.custom.contextMenu.addVariable"
            contextId="de.cau.cs.kieler.synccharts.diagram.ui.diagramContext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+V">
      </key>
   </extension>
   <extension
         point="de.cau.cs.kieler.kiml.layout.layoutInfo">
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.RegionEditPart"
            type="de.cau.cs.kieler.layout.info.types.stateMachine">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.RegionStateCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.stateMachine">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateRegionCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.boxes">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateRegionCompartment2EditPart"
            type="de.cau.cs.kieler.layout.info.types.boxes">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateEntryActionsCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateEntryActionsCompartment2EditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateExitActionsCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateExitActionsCompartment2EditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateInnerActionsCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateInnerActionsCompartment2EditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSignalCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSignalCompartment2EditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSuspensionTriggerCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateSuspensionTriggerCompartment2EditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateVariableCompartmentEditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
      <binding
            class="de.cau.cs.kieler.synccharts.diagram.edit.parts.StateVariableCompartment2EditPart"
            type="de.cau.cs.kieler.layout.info.types.nolayout">
      </binding>
   </extension>

</plugin>

/*
* generated by Xtext
*/
package de.cau.cs.kieler.sccharts.text.sct.ui.contentassist;

import org.eclipse.emf.ecore.EObject;
import org.eclipse.xtext.Assignment;
import org.eclipse.xtext.CrossReference;
import org.eclipse.xtext.RuleCall;
import org.eclipse.xtext.resource.EObjectDescription;
import org.eclipse.xtext.resource.IEObjectDescription;
import org.eclipse.xtext.ui.editor.contentassist.ContentAssistContext;
import org.eclipse.xtext.ui.editor.contentassist.ICompletionProposalAcceptor;

import com.google.common.base.Predicate;

import de.cau.cs.kieler.sccharts.text.sct.ui.contentassist.AbstractSctProposalProvider;
/**
 * see http://www.eclipse.org/Xtext/documentation/latest/xtext.html#contentAssist on how to customize content assistant
 */
public class SctProposalProvider extends AbstractSctProposalProvider {

    public void completeRootRegion_Id(EObject model, Assignment assignment, ContentAssistContext context, ICompletionProposalAcceptor acceptor) {
        //completeRuleCall(((RuleCall)assignment.getTerminal()), context, acceptor);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void completeState_ReferencedScope(EObject model, Assignment assignment,
            ContentAssistContext context, ICompletionProposalAcceptor acceptor) {
        lookupCrossReference(((CrossReference)assignment.getTerminal()), context, acceptor, new Predicate<IEObjectDescription>() {
            
            public boolean apply(IEObjectDescription arg0) {
                return 
                        arg0.getEObjectOrProxy().eIsProxy();
//                        && arg0.getEObjectOrProxy().eContainer() == null;
            }
        });
        
    }
    
    @Override
    public void completeReferencedNode_ReferencedScope(EObject model, Assignment assignment,
            ContentAssistContext context, ICompletionProposalAcceptor acceptor) {
        lookupCrossReference(((CrossReference)assignment.getTerminal()), context, acceptor, new Predicate<IEObjectDescription>() {
            
            public boolean apply(IEObjectDescription arg0) {
                return 
                        arg0.getEObjectOrProxy().eIsProxy();
//                        && arg0.getEObjectOrProxy().eContainer() == null;
            }
        });
        
    }
    
    @Override
    public void completeTestReferenceNode_ReferencedScope(EObject model, Assignment assignment,
            ContentAssistContext context, ICompletionProposalAcceptor acceptor) {
        lookupCrossReference(((CrossReference)assignment.getTerminal()), context, acceptor, new Predicate<IEObjectDescription>() {
            
            public boolean apply(IEObjectDescription arg0) {
                return 
                        arg0.getEObjectOrProxy().eIsProxy();
//                        && arg0.getEObjectOrProxy().eContainer() == null;
            }
        });
        
    }
//    @Override
//    public void completeCallNode_Parameters(EObject model, Assignment assignment,
//            ContentAssistContext context, ICompletionProposalAcceptor acceptor) {
//        lookupCrossReference(((CrossReference)assignment.getTerminal()), context, acceptor, new Predicate<IEObjectDescription>() {
//            
//            public boolean apply(IEObjectDescription arg0) {
//                return 
//                        arg0.getEObjectOrProxy().eIsProxy();
////                        && arg0.getEObjectOrProxy().eContainer() == null;
//            }
//        });
//        
//    }
}
